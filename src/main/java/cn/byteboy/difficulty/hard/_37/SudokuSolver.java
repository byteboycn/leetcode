package cn.byteboy.difficulty.hard._37;

import cn.byteboy.core.Solution;

/**
 * @author hongshaochuan
 * @Date 2021/8/10
 *
 * ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œé€šè¿‡å¡«å……ç©ºæ ¼æ¥è§£å†³æ•°ç‹¬é—®é¢˜ã€‚
 *
 *  æ•°ç‹¬çš„è§£æ³•éœ€ éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š
 *
 *
 *  æ•°å­— 1-9 åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
 *  æ•°å­— 1-9 åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
 *  æ•°å­— 1-9 åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ 3x3 å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰
 *
 *
 *  æ•°ç‹¬éƒ¨åˆ†ç©ºæ ¼å†…å·²å¡«å…¥äº†æ•°å­—ï¼Œç©ºç™½æ ¼ç”¨ '.' è¡¨ç¤ºã€‚
 *
 *
 *
 *
 *
 *
 *  ç¤ºä¾‹ï¼š
 *
 *
 * è¾“å…¥ï¼šboard = [["5","3",".",".","7",".",".",".","."],["6",".",".","1","9","5","."
 * ,".","."],[".","9","8",".",".",".",".","6","."],["8",".",".",".","6",".",".","."
 * ,"3"],["4",".",".","8",".","3",".",".","1"],["7",".",".",".","2",".",".",".","6"
 * ],[".","6",".",".",".",".","2","8","."],[".",".",".","4","1","9",".",".","5"],["
 * .",".",".",".","8",".",".","7","9"]]
 * è¾“å‡ºï¼š[["5","3","4","6","7","8","9","1","2"],["6","7","2","1","9","5","3","4","8"
 * ],["1","9","8","3","4","2","5","6","7"],["8","5","9","7","6","1","4","2","3"],["
 * 4","2","6","8","5","3","7","9","1"],["7","1","3","9","2","4","8","5","6"],["9","
 * 6","1","5","3","7","2","8","4"],["2","8","7","4","1","9","6","3","5"],["3","4","
 * 5","2","8","6","1","7","9"]]
 * è§£é‡Šï¼šè¾“å…¥çš„æ•°ç‹¬å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå”¯ä¸€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹æ‰€ç¤ºï¼š
 *
 *
 *
 *
 *
 *
 *  æç¤ºï¼š
 *
 *
 *  board.length == 9
 *  board[i].length == 9
 *  board[i][j] æ˜¯ä¸€ä½æ•°å­—æˆ–è€… '.'
 *  é¢˜ç›®æ•°æ® ä¿è¯ è¾“å…¥æ•°ç‹¬ä»…æœ‰ä¸€ä¸ªè§£
 *
 *
 *
 *
 *  Related Topics æ•°ç»„ å›æº¯ çŸ©é˜µ
 *  ğŸ‘ 899 ğŸ‘ 0
 */
public class SudokuSolver {

    @Solution
    public void solveSudoku(char[][] board) {
        traverse(board, 0);
    }

    private boolean traverse(char[][] board, int index) {
        int len = board.length;
        if (index == len * len) {
            return true;
        }
        int j = index % len;
        int i = (index - j) /len;

        if (board[i][j] != '.') {
            return traverse(board, index + 1);
        }

        for (char k = '1'; k <= '9'; k++) {
            if (!isValid(board, i, j, k))
                continue;
            board[i][j] = k;
            if (traverse(board, index + 1)) {
                return true;
            }
            board[i][j] = '.';
        }

        return false;
    }

    private boolean isValid(char[][] board, int i, int j, char v) {
        int len = board.length;
        // æ¨ªå‘
        for (int k = 0; k < len; k++) {
            if (board[i][k] == v) {
                return false;
            }
        }

        // çºµå‘
        for (int k = 0; k < len; k++) {
            if (board[k][j] == v) {
                return false;
            }
        }

        // 3x3
        int start_i = i / 3 * 3;
        int start_j = j / 3 * 3;
        for (int k = start_i; k < start_i + 3; k++) {
            for (int l = start_j; l < start_j + 3; l++) {
                if (board[k][l] == v) {
                    return false;
                }
            }
        }
        return true;
    }
}
